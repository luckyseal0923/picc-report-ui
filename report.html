<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>PICC æ–½æ‰“å›å ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans TC", Arial, sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 24px;
      display: flex;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 640px;
    }

    .card {
      background: #fff;
      border-radius: 14px;
      padding: 24px;
      margin-bottom: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    }

    h2 {
      margin: 0 0 16px;
      font-size: 22px;
    }

    h3 {
      margin: 0 0 12px;
      font-size: 18px;
    }

    .hint {
      font-size: 13px;
      color: #64748b;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .row {
      margin-bottom: 14px;
    }

    label {
      display: block;
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 6px;
      color: #334155;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      font-size: 14px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      box-sizing: border-box;
    }

    textarea {
      min-height: 90px;
      resize: vertical;
    }

    .grid2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .readonly {
      background: #f1f5f9;
      font-weight: 700;
    }

    .btn {
      width: 100%;
      padding: 16px;
      font-size: 16px;
      font-weight: 800;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      background: #2563eb;
      color: #fff;
    }

    .btn:disabled {
      background: #94a3b8;
      cursor: not-allowed;
    }

    .danger {
      color: #b91c1c;
      font-size: 13px;
      margin-top: 10px;
      display: none;
    }
  </style>
</head>

<body>
<div class="container">

  <!-- =========================
       ä»»å‹™è³‡è¨Šï¼ˆreadonlyï¼‰
  ========================== -->
  <div class="card">
    <h2>ğŸ“Œ PICC æ–½æ‰“å›å ±</h2>
    <div class="hint">ä»¥ä¸‹ä»»å‹™è³‡è¨Šç”±ç³»çµ±å¸¶å…¥ï¼Œåƒ…ä¾›ç¢ºèªï¼Œç„¡æ³•ä¿®æ”¹ã€‚</div>

    <div class="row">
      <label>ä»»å‹™ç·¨è™Ÿï¼ˆtaskIdï¼‰</label>
      <input class="readonly" id="taskIdText" readonly />
    </div>

    <div class="grid2">
      <div class="row">
        <label>ç—…äººå§“å</label>
        <input class="readonly" id="name" readonly />
      </div>
      <div class="row">
        <label>åºŠè™Ÿ</label>
        <input class="readonly" id="bedNo" readonly />
      </div>
    </div>

    <div class="grid2">
      <div class="row">
        <label>MRN</label>
        <input class="readonly" id="mrn" readonly />
      </div>
      <div class="row">
        <label>æ¥å–®è€…</label>
        <input class="readonly" id="claimedBy" readonly />
      </div>
    </div>
  </div>

  <!-- =========================
       æ–½æ‰“å›å ±è¡¨å–®
  ========================== -->
  <div class="card">
    <h3>ğŸ“ æ–½æ‰“å›å ±è³‡æ–™</h3>

    <form method="POST" action="https://chihwei.app.n8n.cloud/webhook/picc/report-done">

      <!-- å¿…è¦éš±è—æ¬„ä½ -->
      <input type="hidden" name="taskId" id="taskIdInput" />

      <div class="grid2">
        <div class="row">
          <label>æ–½æ‰“äºº</label>
          <input type="text" name="operator" placeholder="è«‹è¼¸å…¥æ–½æ‰“äºº" required />
        </div>

        <div class="row">
          <label>æ”¾ç½®å›°é›£åº¦</label>
          <select name="difficulty" required>
            <option value="">è«‹é¸æ“‡</option>
            <option>éå¸¸ç°¡å–®</option>
            <option>ç°¡å–®</option>
            <option>ä¸­ç­‰</option>
            <option>å›°é›£</option>
            <option>éå¸¸å›°é›£</option>
          </select>
        </div>
      </div>

      <div class="grid2">
        <div class="row">
          <label>æ–½æ‰“ä½ç½®</label>
          <select name="insertionSite" required>
            <option value="">è«‹é¸æ“‡</option>
            <option>å³ä¸Šè‡‚</option>
            <option>å·¦ä¸Šè‡‚</option>
            <option>å…¶ä»–</option>
          </select>
        </div>

        <div class="row">
          <label>è¡€ç®¡</label>
          <select name="vein">
            <option value="">æœªå¡«</option>
            <option>Basilic</option>
            <option>Cephalic</option>
            <option>Brachial</option>
            <option>å…¶ä»–</option>
          </select>
        </div>
      </div>

      <div class="grid2">
        <div class="row">
          <label>ç®¡è·¯é•·åº¦ï¼ˆcmï¼‰</label>
          <input type="number" step="0.1" name="catheterLength" />
        </div>

        <div class="row">
          <label>ç®¡è·¯é¡å‹</label>
          <select name="catheterType">
            <option>å–®è…” PICC</option>
            <option>é›™è…” PICC</option>
          </select>
        </div>
      </div>

      <div class="row">
        <label>å‚™è¨»</label>
        <textarea name="remark" placeholder="è£œå……èªªæ˜ï¼ˆå¯ä¸å¡«ï¼‰"></textarea>
      </div>

      <!-- ç‹€æ…‹å›ºå®š -->
      <input type="hidden" name="status" value="å®Œæˆ" />

      <button class="btn" type="submit" id="submitBtn">é€å‡ºæ–½æ‰“å›å ±</button>
      <div class="danger" id="errBox">âŒ æ‰¾ä¸åˆ° taskIdï¼Œè«‹ç”±å¾…æ–½æ‰“æ¸…å–®é€²å…¥ã€‚</div>
    </form>
  </div>

</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const taskId = params.get("taskId");

  document.getElementById("taskIdText").value = taskId || "æœªå¸¶å…¥";
  document.getElementById("taskIdInput").value = taskId || "";

  if (!taskId) {
    document.getElementById("errBox").style.display = "block";
    document.getElementById("submitBtn").disabled = true;
  }
</script>

</body>
</html>
